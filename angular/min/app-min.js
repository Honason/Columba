var columbaApp=angular.module("columbaApp",["ngRoute","ngResource","ngStorage"]);columbaApp.config(["$routeProvider","$httpProvider",function(e,t){e.when("/",{templateUrl:"angular/pages/dashboard.html",controller:"dashboardController"}).when("/login",{templateUrl:"angular/pages/login.html",controller:"loginController"}),t.interceptors.push(["$q","$location","$localStorage",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.token&&(e.headers.Authorization=o.token),e},responseError:function(o){return(401===o.status||403===o.status)&&t.path("/login"),e.reject(o)}}}])}]),columbaApp.service("userService",["$http",function(e){this.GetAllUsers=function(t){e.post("/users/getall").success(function(e){t(e)})}}]),columbaApp.service("authService",["$http","$log","$localStorage","$location",function(e,t,o,r){this.Login=function(n,l){e.post("/users/login",{email:n,password:l}).success(function(e){e&&(o.token=e.token,o.userName=e.name,r.path("/"))}).error(function(e){t.log(e)})},this.EnsureAuthenticated=function(){return o.token?o.userName:(r.path("/login"),!1)},this.Logout=function(){o.$reset(),r.path("/login")}}]),columbaApp.controller("loginController",["$scope","$location","$log","authService",function(e,t,o,r){e.login=function(){r.Login(e.email,e.password)}}]),columbaApp.controller("dashboardController",["$scope","authService","userService",function(e,t,o){e.authService=t;var r=t.EnsureAuthenticated();r&&(e.userName=r,o.GetAllUsers(function(t){e.users=t}))}]),columbaApp.directive("appHeader",function(){return{templateUrl:"angular/directives/header.html",replace:!0}}),columbaApp.directive("proposalItem",function(){return{templateUrl:"angular/directives/proposal-item.html",replace:!0,scope:{user:"="}}});